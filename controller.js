define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("template/login",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/login",["images/style.css","$","util","core/page","core/model","components/form"],function(e,t,i){var a=(e("$"),e("util"),e("core/page")),o=e("core/model"),s=e("components/form");return a.extend({events:{},onCreate:function(){var e=this;e.$el.siblings().hide(),this.model=new o.ViewModel(this.$el,{title:"登录",buttons:[{value:"确认",click:function(){t.submit(function(t){t.success?(sl.tip("登录成功"),e.back("/")):(sl.tip(t.msg),e.model.set({captcha:"/captcha/"+Date.now()}))})}}]});var t=new s({model:this.model,name:"user",title:"test",useIframe:!0,url:"/api/manage/login",validator:"userValid",enctype:"",fields:[{label:"账号",field:"username",emptyAble:!1,emptyText:"不可为空"},{label:"密码",field:"password",type:"password",emptyAble:!1,emptyText:"不可为空"},{label:"验证码",field:"captcha",type:"captcha",captcha:"/captcha/1",emptyAble:!1,emptyText:"不可为空",render:function(){}}]});this.model.before(".action",t.$el);var i={asdf:1,asdf1:1},l={asdf:1,asdf1:1};delete i.adsf,l.asdf=null;for(var r=[],d=0;1e6>d;d++)r[d]=1;console.log(Date.now());for(var c=Date.now(),d=0;1e6>d;d++);console.log(Date.now()-c),c=Date.now();for(var d=0;1e6>d;d++);console.log(Date.now()-c),console.log(r.length)},onShow:function(){},onDestory:function(){}})});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/index",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(e,t,i){var n=e("$"),l=e("util"),a=e("core/model"),o=e("common/page"),s=e("common/menu"),d=(e("components/form"),e("components/grid"));return o.extend({events:{"click .js_grid_delete":function(e){var t=e.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_destination",{id:t},function(e){e.success?i.grid.load():sl.tip(e.msg)},"json")}},onCreate:function(){this.model=new a.ViewModel(this.$el,{title:"目的地管理"}),this.onResult("destination_change",function(){this.grid.load()}),this.grid=new d({search:{url:"/api/destination/list?areaid="+l.store("global_area"),type:"GET",beforeSend:function(){},data:{keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,pageSize:20,columns:[{text:"目的编号",bind:"ID",width:5},{text:"目的地名称",bind:"Name",width:10},{text:"目的地图片",bind:"MiddlePic",width:10,render:function(e){this.append('<a href="'+e.MiddlePic+'" target="_blank">'+e.MiddlePic+"</a>")}},{text:"操作",bind:"LargePic",width:10,align:"center",valign:"center",render:function(e){this.append('<a href="/modify_destination/'+e.ID+'" >[修改]</a> <a href="javascript:;" data-id="'+e.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get("/"),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("views/modify_destination",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(e,t,i){var n=e("$"),o=(e("util"),e("core/model")),a=e("common/page"),s=e("common/menu"),d=e("components/form");return a.extend({events:{},onCreate:function(){var e=this;this.model=new o.ViewModel(this.$el,{title:"修改目的地",buttons:[{value:"确认",click:function(){t.submit(function(t){t.success?(sl.tip("修改成功"),e.setResult("destination_change"),e.back("/"),e.form.reset()):sl.tip(t.msg)})}}]}),n.get("/api/destination/get?id="+this.route.data.id,function(t){e.model.set(t)},"json");var t=new d({model:this.model,name:"data",title:"test",useIframe:!0,url:"/api/manage/modify_destination",validator:"userValid",enctype:"",fields:[{field:"ID",type:"hidden"},{label:"目的地名称",field:"Name",emptyAble:!1,emptyText:"必填"},{label:"目的地图片",field:"MiddlePic",type:"file"},{label:"目的地大图",type:"file",field:"LargePic"},{label:"目的详情",field:"Content",vAlign:"top",type:"richTextBox",emptyAble:!1,emptyText:"不可为空"}]});this.model.before(".action",t.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/destination_comments",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),l=t("util"),a=t("core/model"),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_quan",{id:e},function(t){t.success?(i.grid.load(),sl.tip("删除成功")):sl.tip(t.msg)},"json")},"click .js_grid_resolve,.js_grid_reject":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;n.post("/api/manage/modify_destination_comment",{id:e,status:n(t.currentTarget).hasClass("js_grid_resolve")?1:2},function(t){t.success?(i.grid.load(),sl.tip("设置成功")):sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new a.ViewModel(this.$el,{title:"目的地评论管理"}),this.onResult("quan_change",function(){this.grid.load()}),this.grid=new d({multiSelect:!0,search:{url:"/api/destination/comment_list?areaid="+l.store("global_area"),type:"GET",beforeSend:function(){},data:{status:{label:"状态",type:"select",options:[{text:"全部",value:""},{text:"未审批",value:"0"},{text:"已审批",value:"1"},{text:"拒绝",value:"2"}]},keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,rowHeight:100,pageSize:20,columns:[{text:"编号",bind:"ID",width:5},{text:"发布人",bind:"UserName",width:10,render:function(t){this.append(t.UserName||t.Mobile)}},{text:"发布时间",bind:"CommentTime",width:10,render:function(t){this.append(l.formatDate(t.CommentTime)),this.append("<br>"),this.append(t.Status?1==t.Status?"已通过":"已拒绝":"未审批")}},{text:"内容",bind:"Content",width:30,render:function(t){this.append(!t.Content||t.Content.length<15?t.Content:t.Content.substr(0,15))}},{text:"图片",bind:"Content",width:10,render:function(t){this.append(l.template('<div style="overflow-y:auto;height:100%;"><%if (Pictures) {for(var i=0;i<Pictures.length;i++){var pic=Pictures[i];%><img src="<%=pic.Src%>" style="max-width:49%;float:left;max-height:90px;"><%}}%></div>',t))}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){1!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_resolve">[通过]</a>'),2!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_reject">[拒绝]</a>'),this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/recommend_list",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),l=t("util"),a=t("core/model"),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_recommend",{id:e},function(t){t.success?i.grid.load():sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new a.ViewModel(this.$el,{title:"推荐管理"}),this.onResult("recommend_change",function(){this.grid.load()}),this.grid=new d({search:{url:"/api/recommend/list?areaid="+l.store("global_area"),type:"GET",beforeSend:function(){},data:{keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,pageSize:20,columns:[{text:"推荐编号",bind:"ID",width:5},{text:"推荐名称",bind:"Name",width:10},{text:"推荐图片",bind:"Pic",width:10,render:function(t){this.append('<a href="'+t.Pic+'" target="_blank">'+t.Pic+"</a>")}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){this.append('<a href="/modify_recommend/'+t.ID+'" >[修改]</a> <a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/recommend_comments",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),l=t("util"),a=t("core/model"),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_quan",{id:e},function(t){t.success?(i.grid.load(),sl.tip("删除成功")):sl.tip(t.msg)},"json")},"click .js_grid_resolve,.js_grid_reject":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;n.post("/api/manage/modify_recommend_comment",{id:e,status:n(t.currentTarget).hasClass("js_grid_resolve")?1:2},function(t){t.success?(i.grid.load(),sl.tip("设置成功")):sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new a.ViewModel(this.$el,{title:"推荐评论管理"}),this.onResult("quan_change",function(){this.grid.load()}),this.grid=new d({multiSelect:!0,search:{url:"/api/recommend/comment_list?areaid="+l.store("global_area"),type:"GET",beforeSend:function(){},data:{status:{label:"状态",type:"select",options:[{text:"全部",value:""},{text:"未审批",value:"0"},{text:"已审批",value:"1"},{text:"拒绝",value:"2"}]},keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,rowHeight:100,pageSize:20,columns:[{text:"编号",bind:"ID",width:5},{text:"发布人",bind:"UserName",width:10,render:function(t){this.append(t.UserName||t.Mobile)}},{text:"发布时间",bind:"CommentTime",width:10,render:function(t){this.append(l.formatDate(t.CommentTime)),this.append("<br>"),this.append(t.Status?1==t.Status?"已通过":"已拒绝":"未审批")}},{text:"内容",bind:"Content",width:30,render:function(t){this.append(!t.Content||t.Content.length<15?t.Content:t.Content.substr(0,15))}},{text:"图片",bind:"Content",width:10,render:function(t){this.append(l.template('<div style="overflow-y:auto;height:100%;"><%if (Pictures) {for(var i=0;i<Pictures.length;i++){var pic=Pictures[i];%><img src="<%=pic.Src%>" style="max-width:49%;float:left;max-height:90px;"><%}}%></div>',t))}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){1!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_resolve">[通过]</a>'),2!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_reject">[拒绝]</a>'),this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/quan_list",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),a=t("util"),l=t("core/model"),s=t("common/page"),o=t("common/menu"),d=(t("components/form"),t("components/grid"));return s.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_quan",{id:e},function(t){t.success?(i.grid.load(),sl.tip("删除成功")):sl.tip(t.msg)},"json")},"click .js_grid_resolve,.js_grid_reject":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;n.post("/api/manage/modify_quan",{id:e,status:n(t.currentTarget).hasClass("js_grid_resolve")?1:2},function(t){t.success?(i.grid.load(),sl.tip("设置成功")):sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new l.ViewModel(this.$el,{title:"驴友圈管理"}),this.onResult("quan_change",function(){this.grid.load()}),this.grid=new d({multiSelect:!0,search:{url:"/api/quan/list?areaid="+a.store("global_area"),type:"GET",beforeSend:function(){},data:{status:{label:"状态",type:"select",options:[{text:"全部",value:""},{text:"未审批",value:"0"},{text:"已审批",value:"1"},{text:"拒绝",value:"2"}]},keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,rowHeight:100,pageSize:20,columns:[{text:"编号",bind:"ID",width:5},{text:"发布人",bind:"UserName",width:10,render:function(t){this.append(t.UserName||t.Mobile)}},{text:"发布时间",bind:"InsertTime",width:10,render:function(t){this.append(a.formatDate(t.InsertTime)),this.append("<br>"),this.append(0==t.Status?"未审批":1==t.Status?"已通过":"已拒绝")}},{text:"内容",bind:"Content",width:30,render:function(t){this.append(!t.Content||t.Content.length<15?t.Content:t.Content.substr(0,15))}},{text:"图片",bind:"Content",width:10,render:function(t){this.append(a.template('<div style="overflow-y:auto;height:100%;"><%if (Pictures) {for(var i=0;i<Pictures.length;i++){var pic=Pictures[i];%><img src="<%=pic.Src%>" style="max-width:49%;float:left;max-height:90px;"><%}}%></div>',t))}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){1!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_resolve">[通过]</a>'),2!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_reject">[拒绝]</a>'),this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=o.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/activity_list",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),a=t("util"),l=t("core/model"),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_activity",{id:e},function(t){t.success?i.grid.load():sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new l.ViewModel(this.$el,{title:"活动管理"}),this.onResult("activity_change",function(){this.grid.load()}),this.grid=new d({search:{url:"/api/activity/list?areaid="+a.store("global_area"),type:"GET",beforeSend:function(){},data:{keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,pageSize:20,columns:[{text:"活动编号",bind:"ID",width:5},{text:"活动名称",bind:"Name",width:10},{text:"时间",bind:"StartTime",width:17,render:function(t){this.append(a.formatDate(t.StartTime)+"到"+a.formatDate(t.FinishTime))}},{text:"活动图片",bind:"Pic",width:10,render:function(t){this.append('<a href="'+t.Pic+'" target="_blank">'+t.Pic+"</a>")}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){this.append('<a href="/modify_activity/'+t.ID+'" >[修改]</a> <a href="/activity_users/'+t.ID+'" >[详情]</a> <a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/activity_users",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var a=(t("$"),t("util")),l=t("core/model"),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{},onCreate:function(){this.model=new l.ViewModel(this.$el,{title:"参加活动的用户管理"}),this.grid=new d({search:{url:"/api/activity/userlist?id="+this.route.data.id,type:"GET",beforeSend:function(){},data:{keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,pageSize:20,columns:[{text:"用户编号",bind:"ID",width:5},{text:"手机号",bind:"Mobile",width:10},{text:"昵称",bind:"NickName",width:10},{text:"报名时间",bind:"JoinTime",width:10,render:function(t){this.append(a.formatDate(t.JoinTime))}},{text:"性别",bind:"Gender",width:5,render:function(t){this.append(t.Gender?"男":"女")}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/add_activity",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,i){var a=(t("$"),t("util")),l=t("core/model"),o=t("common/page"),s=t("common/menu"),r=t("components/form");return o.extend({events:{},onCreate:function(){var t=this;this.model=new l.ViewModel(this.$el,{title:"添加活动",buttons:[{value:"确认",click:function(){e.submit(function(i){i.success?(sl.tip("添加成功"),t.setResult("activity_change"),t.back("/activity_list"),e.reset()):sl.tip(i.msg)})}},{value:"重置",click:function(){e.reset()}}],user:{areaId:a.store("global_area")}});var e=new r({model:this.model,name:"user",title:"test",useIframe:!0,url:"/api/manage/add_activity",validator:"userValid",enctype:"",fields:[{field:"areaId",type:"hidden"},{label:"活动名称",field:"name",emptyAble:!1,emptyText:"必填"},{label:"活动地址",field:"address",emptyAble:!1,emptyText:"必填"},{label:"活动图片",field:"pic",type:"file",emptyAble:!1,emptyText:"不可为空"},{label:"活动开始时间",field:"startTime",type:"timepicker",emptyAble:!1,emptyText:"不可为空"},{label:"活动结束时间",field:"finishTime",type:"timepicker",emptyAble:!1,emptyText:"不可为空"},{label:"活动详情",field:"content",vAlign:"top",type:"richTextBox",emptyAble:!1,emptyText:"不可为空"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/modify_activity",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,i){var n=t("$"),a=t("util"),l=t("core/model"),o=t("common/page"),s=t("common/menu"),r=t("components/form");return o.extend({events:{},onCreate:function(){var t=this;this.model=new l.ViewModel(this.$el,{title:"修改活动",buttons:[{value:"确认",click:function(){e.submit(function(e){e.success?(sl.tip("修改成功"),t.setResult("activity_change"),t.back("/activity_list"),t.form.reset()):sl.tip(e.msg)})}}]}),n.get("/api/activity/get?id="+this.route.data.id,function(e){e.data.StartTime=a.formatDate(e.data.StartTime),e.data.FinishTime=a.formatDate(e.data.FinishTime),t.model.set(e)},"json");var e=new r({model:this.model,name:"data",title:"test",useIframe:!0,url:"/api/manage/modify_activity",validator:"userValid",enctype:"",fields:[{field:"ID",type:"hidden"},{label:"活动名称",field:"Name",emptyAble:!1,emptyText:"必填"},{label:"活动地址",field:"Address",emptyAble:!1,emptyText:"必填"},{label:"活动图片",field:"Pic",type:"file"},{label:"活动开始时间",field:"StartTime",type:"timepicker",emptyAble:!1,emptyText:"不可为空"},{label:"活动结束时间",field:"FinishTime",type:"timepicker",emptyAble:!1,emptyText:"不可为空"},{label:"活动详情",field:"Content",vAlign:"top",type:"richTextBox",emptyAble:!1,emptyText:"不可为空"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/article_list",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),l=(t("util"),t("core/model")),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_article",{id:e},function(t){t.success?i.grid.load():sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new l.ViewModel(this.$el,{title:"文案管理"}),this.onResult("activity_change",function(){this.grid.load()}),this.grid=new d({search:{url:"/api/article/list",type:"GET",beforeSend:function(){},data:{keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,pageSize:20,columns:[{text:"文案编号",bind:"ID",width:5},{text:"文案标题",bind:"Title",width:10},{text:"图片",bind:"Pic",width:10,render:function(t){this.append('<a href="/'+t.Pic+'" target="_blank">'+t.Pic+"</a>")}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){this.append('<a href="/modify_article/'+t.ID+'" >[修改]</a> <a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/add_recommend",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,i){var a=(t("$"),t("util")),l=t("core/model"),o=t("common/page"),s=t("common/menu"),r=t("components/form");return o.extend({events:{},onCreate:function(){var t=this;this.model=new l.ViewModel(this.$el,{title:"添加推荐",buttons:[{value:"确认",click:function(){e.submit(function(i){i.success?(sl.tip("添加成功"),t.setResult("recommend_change"),t.back("/recommend_list"),e.reset()):sl.tip(i.msg)})}},{value:"重置",click:function(){e.reset()}}],user:{areaId:a.store("global_area")}});var e=new r({model:this.model,name:"user",title:"test",useIframe:!0,url:"/api/manage/add_recommend",validator:"userValid",enctype:"",fields:[{field:"areaId",type:"hidden"},{label:"推荐名称",field:"name",emptyAble:!1,emptyText:"必填"},{label:"推荐图片",field:"pic",type:"file",emptyAble:!1,emptyText:"不可为空"},{label:"推荐详情",field:"content",vAlign:"top",type:"richTextBox",emptyAble:!1,emptyText:"不可为空"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("views/add_destination",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,i){var a=(t("$"),t("util")),l=t("core/model"),o=t("common/page"),s=t("common/menu"),r=t("components/form");return o.extend({events:{},onCreate:function(){var t=this;this.model=new l.ViewModel(this.$el,{title:"添加目的地",buttons:[{value:"确认",click:function(){e.submit(function(i){i.success?(sl.tip("添加成功"),t.setResult("destination_change"),t.back("/"),e.reset()):sl.tip(i.msg)})}},{value:"重置",click:function(){e.reset()}}],user:{areaId:a.store("global_area")}});var e=new r({model:this.model,name:"user",title:"test",useIframe:!0,url:"/api/manage/add_destination",validator:"userValid",enctype:"",fields:[{field:"areaId",type:"hidden"},{label:"目的地名称",field:"name",emptyAble:!1,emptyText:"必填"},{label:"目的地图片",field:"middlePic",type:"file",emptyAble:!1,emptyText:"不可为空"},{label:"目的地大图",type:"file",field:"largePic",emptyAble:!1,emptyText:"不可为空"},{label:"目的详情",field:"content",vAlign:"top",type:"richTextBox",emptyAble:!1,emptyText:"不可为空"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("template/form",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"> <h1 sn-binding="html:title"></h1> <div class="action"> <b class="button" sn-repeat="button in buttons" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("template/list",["util"],function(require){var T=(require("util"),{html:function($data){var __="";with($data||{})__+='<div class="main"><h1 sn-binding="html:title"></h1> <div class="toolbar"> <b class="button" sn-repeat="button in toolbar" sn-on="click:button.click"> <em sn-binding="class:button.ico"></em><text sn-binding="html:button.value"></text> </b> </div> <div class="action"></div> </div> ';return __},helpers:{}});return T.template=T.html,T});define("views/activity_comments",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),a=t("util"),l=t("core/model"),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_quan",{id:e},function(t){t.success?(i.grid.load(),sl.tip("删除成功")):sl.tip(t.msg)},"json")},"click .js_grid_resolve,.js_grid_reject":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;n.post("/api/manage/modify_activity_comment",{id:e,status:n(t.currentTarget).hasClass("js_grid_resolve")?1:2},function(t){t.success?(i.grid.load(),sl.tip("设置成功")):sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new l.ViewModel(this.$el,{title:"活动评论管理"}),this.onResult("quan_change",function(){this.grid.load()}),this.grid=new d({multiSelect:!0,search:{url:"/api/activity/comment_list?areaid="+a.store("global_area"),type:"GET",beforeSend:function(){},data:{status:{label:"状态",type:"select",options:[{text:"全部",value:""},{text:"未审批",value:"0"},{text:"已审批",value:"1"},{text:"拒绝",value:"2"}]},keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,rowHeight:100,pageSize:20,columns:[{text:"编号",bind:"ID",width:5},{text:"发布人",bind:"UserName",width:10,render:function(t){this.append(t.UserName||t.Mobile)}},{text:"发布时间",bind:"CommentTime",width:10,render:function(t){this.append(a.formatDate(t.CommentTime)),this.append("<br>"),this.append(t.Status?1==t.Status?"已通过":"已拒绝":"未审批")}},{text:"内容",bind:"Content",width:30,render:function(t){this.append(!t.Content||t.Content.length<15?t.Content:t.Content.substr(0,15))}},{text:"图片",bind:"Content",width:10,render:function(t){this.append(a.template('<div style="overflow-y:auto;height:100%;"><%if (Pictures) {for(var i=0;i<Pictures.length;i++){var pic=Pictures[i];%><img src="<%=pic.Src%>" style="max-width:49%;float:left;max-height:90px;"><%}}%></div>',t))}},{text:"操作",width:10,align:"center",valign:"center",render:function(t){1!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_resolve">[通过]</a>'),2!=t.Status&&this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_reject">[拒绝]</a>'),this.append('<a href="javascript:;" data-id="'+t.ID+'" class="js_grid_delete">[删除]</a>')}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("views/modify_article",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,i){var n=t("$"),a=(t("util"),t("core/model")),o=t("common/page"),s=t("common/menu"),r=t("components/form");return o.extend({events:{},onCreate:function(){var t=this;this.model=new a.ViewModel(this.$el,{title:"修改活动",buttons:[{value:"确认",click:function(){e.submit(function(e){e.success?(sl.tip("修改成功"),t.setResult("article_change"),t.back("/article_list"),t.form.reset()):sl.tip(e.msg)})}}]}),n.get("/api/article/get?id="+this.route.data.id,function(e){t.model.set(e)},"json");var e=new r({model:this.model,name:"data",title:"test",useIframe:!0,url:"/api/manage/modify_article",validator:"userValid",enctype:"",fields:[{field:"ID",type:"hidden"},{label:"老师姓名",field:"Title",emptyAble:!1,emptyText:"必填"},{label:"签名(两行签名用|隔开)",field:"SubTitle",emptyAble:!1,emptyText:"必填"},{label:"教龄",field:"TeachingAge",emptyAble:!1,emptyText:"必填"},{label:"所属专题",field:"Type",type:"select",options:{data:[{text:"钢琴",value:"0"},{text:"游泳",value:"1"},{text:"语文",value:"2"},{text:"英语",value:"3"},{text:"吉他",value:"4"},{text:"奥数",value:"5"},{text:"绘画",value:"6"},{text:"网球",value:"7"}]}},{label:"好评率",field:"PraiseRate",emptyAble:!1,emptyText:"必填"},{label:"续课率",field:"ContinueRate"},{label:"课程ID",field:"RelativeID",type:"number",regex:/^\d+$/,regexText:"必填数字"},{label:"价格",field:"Price",regex:/^\d+(\.\d+){0,1}$/,regexText:"必填数字"},{label:"特价",field:"SpecialPrice",regex:/^\d+(\.\d+){0,1}$/,regexText:"必填数字"},{label:"图片",field:"Pic",type:"file"},{label:"图片2",field:"Pic1",type:"file"},{label:"排序权重",field:"Sort",type:"number",emptyAble:!1,emptyText:"不可为空",regex:/^\d+$/,regexText:"必填数字"},{label:"寄语/成果",field:"Content",vAlign:"top",type:"textarea",emptyAble:!1,emptyText:"不可为空"},{label:"简介",field:"Content1",vAlign:"top",type:"textarea"},{label:"寄语",field:"Content2",vAlign:"top",type:"textarea"},{label:"经历",field:"Content3",vAlign:"top",type:"textarea"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("views/add_article",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,i){var a=(t("$"),t("util"),t("core/model")),o=t("common/page"),s=t("common/menu"),r=t("components/form");return o.extend({events:{},onCreate:function(){var t=this;this.model=new a.ViewModel(this.$el,{title:"添加文案",buttons:[{value:"确认",click:function(){e.submit(function(i){i.success?(sl.tip("添加成功"),t.setResult("article_change"),t.back("/article_list"),e.reset()):sl.tip(i.msg)})}},{value:"重置",click:function(){e.reset()}}]});var e=new r({model:this.model,name:"form",useIframe:!0,url:"/api/manage/add_article",validator:"formValid",enctype:"",fields:[{label:"老师姓名",field:"Title",emptyAble:!1,emptyText:"必填"},{label:"签名(两行签名用|隔开)",field:"SubTitle",emptyAble:!1,emptyText:"必填"},{label:"教龄",field:"TeachingAge",emptyAble:!1,emptyText:"必填"},{label:"所属专题",field:"Type",type:"select",options:{data:[{text:"钢琴",value:"0"},{text:"游泳",value:"1"},{text:"语文",value:"2"},{text:"英语",value:"3"},{text:"吉他",value:"4"},{text:"奥数",value:"5"},{text:"绘画",value:"6"},{text:"网球",value:"7"}]}},{label:"好评率",field:"PraiseRate",emptyAble:!1,emptyText:"必填"},{label:"续课率",field:"ContinueRate"},{label:"课程ID",field:"RelativeID",type:"number",regex:/^\d+$/,regexText:"必填数字"},{label:"价格",field:"Price",regex:/^\d+(\.\d+){0,1}$/,regexText:"必填数字"},{label:"特价",field:"SpecialPrice",regex:/^\d+(\.\d+){0,1}$/,regexText:"必填数字"},{label:"图片",field:"Pic",type:"file"},{label:"图片2",field:"Pic1",type:"file"},{label:"排序权重",field:"Sort",type:"number",emptyAble:!1,emptyText:"不可为空",regex:/^\d+$/,regexText:"必填数字"},{label:"寄语or成果",field:"Content",vAlign:"top",type:"textarea",emptyAble:!1,emptyText:"不可为空"},{label:"简介",field:"Content1",vAlign:"top",type:"textarea"},{label:"寄语",field:"Content2",vAlign:"top",type:"textarea"},{label:"经历",field:"Content3",vAlign:"top",type:"textarea"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("views/user_list",["images/style.css","$","util","core/model","common/page","common/menu","components/form","components/grid"],function(t,e,i){var n=t("$"),a=(t("util"),t("core/model")),o=t("common/page"),s=t("common/menu"),d=(t("components/form"),t("components/grid"));return o.extend({events:{"click .js_grid_delete":function(t){var e=t.currentTarget.getAttribute("data-id"),i=this;window.confirm("确认删除？")&&n.post("/api/manage/delete_user",{id:e},function(t){t.success?i.grid.load():sl.tip(t.msg)},"json")}},onCreate:function(){this.model=new a.ViewModel(this.$el,{title:"用户管理"}),this.onResult("activity_change",function(){this.grid.load()}),this.grid=new d({search:{url:"/api/manage/user_list",type:"GET",beforeSend:function(){},data:{keywords:{label:"关键字",type:"text"}}},onSelectRow:function(){},pageEnabled:!0,pageSize:20,columns:[{text:"用户编号",bind:"ID",width:5},{text:"手机号",bind:"Mobile",width:10},{text:"昵称",bind:"NickName",width:10},{text:"性别",bind:"Gender",width:17,render:function(t){this.append(t.Gender?"男":"女")}}]}).search(),this.$el.find(".toolbar").after(this.grid.$el)},onShow:function(){this.menu=s.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});define("views/modify_recommend",["images/style.css","$","util","core/model","common/page","common/menu","components/form"],function(t,e,n){var i=t("$"),r=(t("util"),t("core/model")),s=t("common/page"),o=t("common/menu"),l=t("components/form");return s.extend({events:{},onCreate:function(){var t=this;this.model=new r.ViewModel(this.$el,{title:"修改目的地",buttons:[{value:"确认",click:function(){e.submit(function(e){e.success?(sl.tip("修改成功"),t.setResult("recommend_change"),t.back("/"),t.form.reset()):sl.tip(e.msg)})}}]}),i.get("/api/recommend/get?id="+this.route.data.id,function(e){t.model.set(e)},"json");var e=new l({model:this.model,name:"data",title:"test",useIframe:!0,url:"/api/manage/modify_recommend",validator:"userValid",enctype:"",fields:[{field:"ID",type:"hidden"},{label:"推荐名称",field:"Name",emptyAble:!1,emptyText:"必填"},{label:"推荐图片",field:"Pic",type:"file"},{label:"推荐详情",field:"Content",vAlign:"top",type:"richTextBox",emptyAble:!1,emptyText:"不可为空"}]});this.model.before(".action",e.$el)},onShow:function(){this.menu=o.get(this.route.path),this.$el.before(this.menu.$el)},onDestory:function(){}})});